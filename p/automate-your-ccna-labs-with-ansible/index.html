<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Automating CCNA-Labs with Ansible in EVE-NG to start your Network-Automation-Journey "><title>Automate your CCNA-Labs with Ansible</title><link rel=canonical href=https://packet-warrior.net/p/automate-your-ccna-labs-with-ansible/><link rel=stylesheet href=/scss/style.min.ac77dcf8b111b51da39a92990f431923f210f3876d85798a2125667f96dc33a4.css><meta property="og:title" content="Automate your CCNA-Labs with Ansible"><meta property="og:description" content="Automating CCNA-Labs with Ansible in EVE-NG to start your Network-Automation-Journey "><meta property="og:url" content="https://packet-warrior.net/p/automate-your-ccna-labs-with-ansible/"><meta property="og:site_name" content="Christopher Vierheller"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Ansible"><meta property="article:tag" content="Network Automation"><meta property="article:tag" content="EVE-NG"><meta property="article:published_time" content="2022-11-03T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-03T00:00:00+00:00"><meta property="og:image" content="https://packet-warrior.net/p/automate-your-ccna-labs-with-ansible/ansible_cover_1.png"><meta name=twitter:title content="Automate your CCNA-Labs with Ansible"><meta name=twitter:description content="Automating CCNA-Labs with Ansible in EVE-NG to start your Network-Automation-Journey "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://packet-warrior.net/p/automate-your-ccna-labs-with-ansible/ansible_cover_1.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-RKTBB3FZG0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RKTBB3FZG0",{anonymize_ip:!1})}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=about/Head_Avatar.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Christopher Vierheller</a></h1><h2 class=site-description>Packet-Warrior Blog ( ͡ᵔ ͜ʖ ͡ᵔ ) Publishing articles throughout my tech journey with a focus on Networks & Cybersecurity.</h2></div></header><ol class=social-menu><li><a href=https://github.com/packetwarrior95 target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://linkedin.com/in/vierheller-5407/ target=_blank title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg></a></li><li><a href=mailto:christopher@packet-warrior.net target=_blank title=Mail><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-messages" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M21 14l-3-3h-7a1 1 0 01-1-1V4a1 1 0 011-1h9a1 1 0 011 1v10"/><path d="M14 15v2a1 1 0 01-1 1H6l-3 3V11a1 1 0 011-1h2"/></svg></a></li><li><a href=https://twitter.com/Packet_Warrior target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/automate-your-ccna-labs-with-ansible/><img src=/p/automate-your-ccna-labs-with-ansible/ansible_cover_1_hu12e3a9305b0d27840b378eb3d2d37656_34383_800x0_resize_box_3.png srcset="/p/automate-your-ccna-labs-with-ansible/ansible_cover_1_hu12e3a9305b0d27840b378eb3d2d37656_34383_800x0_resize_box_3.png 800w, /p/automate-your-ccna-labs-with-ansible/ansible_cover_1_hu12e3a9305b0d27840b378eb3d2d37656_34383_1600x0_resize_box_3.png 1600w" width=800 height=490 loading=lazy alt="Featured image of post Automate your CCNA-Labs with Ansible"></a></div><div class=article-details><header class=article-category><a href=/categories/networks/>Networks</a>
<a href=/categories/eve-ng/>EVE-NG</a>
<a href=/categories/ccna/>CCNA</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/automate-your-ccna-labs-with-ansible/>Automate your CCNA-Labs with Ansible</a></h2><h3 class=article-subtitle>Automating CCNA-Labs with Ansible in EVE-NG to start your Network-Automation-Journey</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Nov 03, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p>Hello guys,</p><p>have you always wanted to start trying out network automation tools like Ansible?
Where do you start ? Today I will show you how to start with Ansible in a practical scenario to get your feet wet with this topic.
You can learn network automation while learning for your CCNA to make your own automated labs. This will gain you valuable knowledge for your future. You will need EVE-NG (open-source) for this tutorial. I will link you to sources where to go after the tutorial to gain more knowledge about Ansible since teaching the concepts of Ansible will exceed the frame of this blog post.</p><h2 id=requirements>Requirements</h2><ul><li>installed and running version of EVE-NG in the same subnet as your homerouter</li><li>basic network-knowledge and little experience with Cisco routers</li><li>Cisco VIRL/CML Images (can only be purchased on the official Cisco Store)</li><li>WinSCP or another SFTP-client</li></ul><h2 id=scenario--goals>Scenario / Goals</h2><p>We want to reach the goal in this scenario to configure the other interfaces of the routers Berlin and Paris and adding a static route, so that PC1 and PC2 can reach and ping each other. We will create a Ansible-Server which will orchestrate and configure the routers after we connect and configure the GigabitEthernert 0/0 interfaces of the routers to our home-subnet.</p><p><img src=/p/automate-your-ccna-labs-with-ansible/Topology_.png width=980 height=433 srcset="/p/automate-your-ccna-labs-with-ansible/Topology__hu0c247a45ad155b30b08cf7708c494007_42274_480x0_resize_box_3.png 480w, /p/automate-your-ccna-labs-with-ansible/Topology__hu0c247a45ad155b30b08cf7708c494007_42274_1024x0_resize_box_3.png 1024w" loading=lazy alt=Network-Topology class=gallery-image data-flex-grow=226 data-flex-basis=543px></p><h2 id=setup-ubuntu-server-and-install-ansible>Setup Ubuntu Server and install Ansible</h2><p>First you need to download this special EVE-NG Linux Ubuntu Image <strong><a class=link href=https://www.eve-ng.net/index.php/documentation/howtos/howto-create-own-linux-host-image/ target=_blank rel=noopener>here</a></strong> and follow the instructions on the website.</p><p>Now you will create a new EVE-NG Lab and will add a Linux-Ubuntu Server.
You need to add now the other devices from the network-topology too.
These are two cisco routers, one cisco switch, two virtual PC´s.
Finally you need to add a network and select <strong>ManagementCloud</strong> so that it is bridged to your home-router subnet for the Internet connection. Connect the devices like in my network-topology. The ubuntu-server will get automatically a IP from your DHCP-server.<br>Start up all devices. We have to configure only the two routers on one interface and to allow ssh, so Ansible will get acces to the devices to push the configurations to it. Set here static IP-adresses out of your home-router´s DHCP address-space.</p><p>We will configure now a initial config to each Cisco Router so we can push configs to them and configure automatically the remaining things.
You have to do this then for the Router-Paris too and configure the correct IP-address.
The Gi0/0 interface will get a static IP, SSH will be enabled and the SSH-User <strong>ansible</strong> with password <strong>ansible</strong> will be created.</p><p>Initial Configuration for the Router-Berlin:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>    Router-Berlin(config)#int Gi0/0
</span></span><span class=line><span class=cl>    Router-Berlin(config)#ip addr 192.168.0.35 255.255.255.0
</span></span><span class=line><span class=cl>    Router-Berlin(config)#no shutdown
</span></span><span class=line><span class=cl>    Router-Berlin#conf t
</span></span><span class=line><span class=cl>    Enter configuration commands, one per line.  End with CNTL/Z.
</span></span><span class=line><span class=cl>    Router-Berlin(config)#username ansible priv 15 secret cisco
</span></span><span class=line><span class=cl>    Router-Berlin(config)#ip domain-name automation.com
</span></span><span class=line><span class=cl>    Router-Berlin(config)#crypto key generate rsa 
</span></span><span class=line><span class=cl>    The name for the keys will be: Router-Berlin.automation.com
</span></span><span class=line><span class=cl>    Choose the size of the key modulus in the range of 360 to 4096 for your
</span></span><span class=line><span class=cl>    General Purpose Keys. Choosing a key modulus greater than 512 may take
</span></span><span class=line><span class=cl>    a few minutes.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    How many bits in the modulus [512]: 1024
</span></span><span class=line><span class=cl>    % Generating 1024 bit RSA keys, keys will be non-exportable...
</span></span><span class=line><span class=cl>    [OK] (elapsed time was 1 seconds)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Router-Berlin(config)#
</span></span><span class=line><span class=cl>    *Oct 27 12:43:04.114: %SSH-5-ENABLED: SSH 1.99 has been enabled
</span></span><span class=line><span class=cl>    Router-Berlin(config)#ip ssh version 2
</span></span><span class=line><span class=cl>    Router-Berlin(config)#line vty 0 15
</span></span><span class=line><span class=cl>    Router-Berlin(config-line)#login local
</span></span><span class=line><span class=cl>    Router-Berlin(config-line)#transport input ssh
</span></span></code></pre></td></tr></table></div></div><p><img src=/p/automate-your-ccna-labs-with-ansible/Router_Berlin_Config_IP.png width=889 height=201 srcset="/p/automate-your-ccna-labs-with-ansible/Router_Berlin_Config_IP_hu8568f4ef4c8040a125d0db586103fd7f_18188_480x0_resize_box_3.png 480w, /p/automate-your-ccna-labs-with-ansible/Router_Berlin_Config_IP_hu8568f4ef4c8040a125d0db586103fd7f_18188_1024x0_resize_box_3.png 1024w" loading=lazy alt="Initial Configuration Berlin-Router" class=gallery-image data-flex-grow=442 data-flex-basis=1061px></p><p>Now on the ubuntu-server I recommend you to do these following steps to update the system and to enable SSH.
After that you can use your favorite SSH-Program to access the server.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>    sudo apt-get update &amp;&amp; apt-get upgrade
</span></span><span class=line><span class=cl>    sudo dpkg-reconfigure keyboard-configuration
</span></span><span class=line><span class=cl>    sudo systemctl enable ssh
</span></span><span class=line><span class=cl>    sudo systemctl start ssh
</span></span></code></pre></td></tr></table></div></div><p>Default login credentials for this image:</p><ul><li>User: <strong>user</strong> / Password <strong>Test123</strong></li><li>User: <strong>root</strong> / Password <strong>Test123</strong></li></ul><p>Now we will install Ansible with the following commands and verify the version at the end.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>    $ sudo apt update
</span></span><span class=line><span class=cl>    $ sudo apt install software-properties-common
</span></span><span class=line><span class=cl>    $ sudo add-apt-repository --yes --update ppa:ansible/ansible
</span></span><span class=line><span class=cl>    $ sudo apt install ansible
</span></span><span class=line><span class=cl>    $ ansible --version
</span></span></code></pre></td></tr></table></div></div><p>Add the Berlin and Paris router to the local host-file on the ubuntu system so the FQDN will get resolved immediately.
Add these two lines text into the host-file with the command <strong>nano /etc/host</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>    192.168.0.20 Router-Paris
</span></span><span class=line><span class=cl>    192.168.0.35 Router-Berlin
</span></span></code></pre></td></tr></table></div></div><p>We will check now if we have a good and working network-connection with low latency to the Cisco-Routers. The results show we have a good connection between 1.5 and 2.5 ms.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>    root@ubuntu22-server:/etc/ansible# ping Router-Berlin -c 5
</span></span><span class=line><span class=cl>    PING Router-Berlin (192.168.0.35) 56(84) bytes of data.
</span></span><span class=line><span class=cl>    64 bytes from Router-Berlin (192.168.0.35): icmp_seq=1 ttl=255 time=2.37 ms
</span></span><span class=line><span class=cl>    64 bytes from Router-Berlin (192.168.0.35): icmp_seq=2 ttl=255 time=2.25 ms
</span></span><span class=line><span class=cl>    64 bytes from Router-Berlin (192.168.0.35): icmp_seq=3 ttl=255 time=1.66 ms
</span></span><span class=line><span class=cl>    64 bytes from Router-Berlin (192.168.0.35): icmp_seq=4 ttl=255 time=2.33 ms
</span></span><span class=line><span class=cl>    64 bytes from Router-Berlin (192.168.0.35): icmp_seq=5 ttl=255 time=1.79 ms
</span></span></code></pre></td></tr></table></div></div><p>The SSH-Connection will not work because of different encryption-algorithms which are supported on these different ssh-program of the devices.
Add the following lines to the SSH-config (~/.ssh/config) on the Ubuntu-server to allow different encryption-algorithms.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>    root@ubuntu22-server:~# nano ~/.ssh/config
</span></span><span class=line><span class=cl>    add text
</span></span><span class=line><span class=cl>    Host 192.168.0.35
</span></span><span class=line><span class=cl>        KexAlgorithms +diffie-hellman-group-exchange-sha1
</span></span><span class=line><span class=cl>        HostkeyAlgorithms +ssh-rsa
</span></span><span class=line><span class=cl>    Host 192.168.0.20
</span></span><span class=line><span class=cl>        KexAlgorithms +diffie-hellman-group-exchange-sha1
</span></span><span class=line><span class=cl>        HostkeyAlgorithms +ssh-rsa
</span></span></code></pre></td></tr></table></div></div><p>Confirm working SSH-access by connecting to the router.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>ssh ansible@192.168.0.35
</span></span></code></pre></td></tr></table></div></div><h2 id=uploading-ansible-files-and-playbooks>Uploading Ansible Files and Playbooks</h2><p>Download the <a class=link href=https://github.com/packetwarrior95/ansible-networkautomation target=_blank rel=noopener><strong>ansible-networkautomation</strong></a> folder on my Github and upload it to your ubuntu-server to the path <strong>/etc/ansible</strong> (not the readme-file) with your favorite file-transfer program. I recommend WinSCP for this task.
Here you can find playbooks and a <strong>hosts</strong>-file. In the playbook we define what we will configure and in the host-file we define which device we configure and what way/connection-type we use for it. If you used different IP-addresses than me, you have to edit the file <strong>/etc/ansible/hosts</strong> with your IP´s.
The file-structure should look like this when you are done.</p><p><img src=/p/automate-your-ccna-labs-with-ansible/ansible_playbook.png width=819 height=205 srcset="/p/automate-your-ccna-labs-with-ansible/ansible_playbook_hua23f75f7a2f9e1eaefaadc0a7cc55600_10074_480x0_resize_box_3.png 480w, /p/automate-your-ccna-labs-with-ansible/ansible_playbook_hua23f75f7a2f9e1eaefaadc0a7cc55600_10074_1024x0_resize_box_3.png 1024w" loading=lazy alt=Ansible-Files class=gallery-image data-flex-grow=399 data-flex-basis=958px></p><h2 id=executing-ansible-playbooks-for-the-automated-configuration>Executing Ansible playbooks for the automated configuration</h2><p>Finally we did all the preparation work.</p><p>We can finally push the configuration to the two routers to reach our goal and without manually executing commands on the routers.</p><p>If you want to execute an Ansible-Playbook to execute a change, you just need the command <strong>ansible-playbooks</strong> yaml-filename.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>    sudo ansible-playbooks /etc/ansible/ccna-ansible/router_berlin_configuration.yaml
</span></span></code></pre></td></tr></table></div></div><p>You should now see something like this. Several changes were made.
Here in the overview after the playbook-execution you see if something failed, if something was even changed and how many changes were done.</p><p><img src=/p/automate-your-ccna-labs-with-ansible/router-paris-execution.png width=1084 height=154 srcset="/p/automate-your-ccna-labs-with-ansible/router-paris-execution_huc7906e4b4110a18a57879b85883a5835_11761_480x0_resize_box_3.png 480w, /p/automate-your-ccna-labs-with-ansible/router-paris-execution_huc7906e4b4110a18a57879b85883a5835_11761_1024x0_resize_box_3.png 1024w" loading=lazy alt="Successful execution" class=gallery-image data-flex-grow=703 data-flex-basis=1689px></p><p>Wuhuhuu!! We successfully configured automated the other router interfaces and added a static route to the routing table.</p><h2 id=checking-the-results--can-i-ping-pc2-from-pc-1->Checking the results / Can I ping PC2 from PC 1 ?</h2><p>In the final step we will confirm the Ansible configuration by connecting to the devices and checking the current configuration.</p><p><strong>Ping from PC1 to PC2</strong><br><img src=/p/automate-your-ccna-labs-with-ansible/result_ping_PC2.png width=461 height=197 srcset="/p/automate-your-ccna-labs-with-ansible/result_ping_PC2_hu8870eb7fe6a7872aeeec68f56c9cff6e_10684_480x0_resize_box_3.png 480w, /p/automate-your-ccna-labs-with-ansible/result_ping_PC2_hu8870eb7fe6a7872aeeec68f56c9cff6e_10684_1024x0_resize_box_3.png 1024w" loading=lazy alt="Successful Ping" class=gallery-image data-flex-grow=234 data-flex-basis=561px></p><p><strong>Router-Berlin: Interface IP Configuration</strong>
<img src=/p/automate-your-ccna-labs-with-ansible/result_Router_Berlin_IP_int.png width=704 height=152 srcset="/p/automate-your-ccna-labs-with-ansible/result_Router_Berlin_IP_int_hu06dd25f1e02f863ec436eca8a001c12c_11757_480x0_resize_box_3.png 480w, /p/automate-your-ccna-labs-with-ansible/result_Router_Berlin_IP_int_hu06dd25f1e02f863ec436eca8a001c12c_11757_1024x0_resize_box_3.png 1024w" loading=lazy alt="Correct IP Addresses on the Interface" class=gallery-image data-flex-grow=463 data-flex-basis=1111px></p><p><strong>Router-Berlin: IP Routingtable</strong>
<img src=/p/automate-your-ccna-labs-with-ansible/result_Router_Berlin_IP_Route.png width=556 height=175 srcset="/p/automate-your-ccna-labs-with-ansible/result_Router_Berlin_IP_Route_hu6f18c5e7bb217cbc2f37617cf00d12a4_15154_480x0_resize_box_3.png 480w, /p/automate-your-ccna-labs-with-ansible/result_Router_Berlin_IP_Route_hu6f18c5e7bb217cbc2f37617cf00d12a4_15154_1024x0_resize_box_3.png 1024w" loading=lazy alt="Correct new IP-Routes" class=gallery-image data-flex-grow=317 data-flex-basis=762px></p><p>We can confirm that everything was successful configured.</p><h2 id=where-to-get-more-information-about-ansible>Where to get more information about Ansible</h2><p>Now you can continue to learn about Ansible with these resources:</p><ul><li><p><a class=link href=https://www.pluralsight.com/courses/ansible-network-automation-getting-started target=_blank rel=noopener><strong>Pluralsight-Course</strong></a> by Christopher Hart (recommended)</p></li><li><p><a class=link href=https://docs.ansible.com/ansible/latest/user_guide/index.html#getting-started target=_blank rel=noopener><strong>Official Ansible Documentation</strong></a></p></li><li><p><a class=link href=https://docs.ansible.com/ansible/latest/collections/cisco/ios/index.html target=_blank rel=noopener><strong>Cisco IOS Modules/Playbooks</strong></a></p></li><li><p><strong>Books: Mastering Python Networking by Eric Chou</strong></p></li></ul><p>I hope you learnt something and my tutorial was useful : )</p><p>Reach out on my social-media accounts when you have any questions.</p><p>Thanks for reading,<br>Christopher</p></section><footer class=article-footer><section class=article-tags><a href=/tags/ansible/>Ansible</a>
<a href=/tags/network-automation/>Network Automation</a>
<a href=/tags/eve-ng/>EVE-NG</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Author Christopher Vierheller</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/how-to-add-custom-symbols-in-eve-ng/><div class=article-image><img src=/p/how-to-add-custom-symbols-in-eve-ng/_huecdfc8e8a87b4839ae973c7a13656e13_703494_abb7a58aff71f50893243cef24a0e95b.jpeg width=250 height=150 loading=lazy alt="Featured image of post How to add custom symbols in EVE-NG" data-hash="md5-lUIy8ga7Tt9AHdGUgl/IRA=="></div><div class=article-details><h2 class=article-title>How to add custom symbols in EVE-NG</h2></div></a></article><article class=has-image><a href=/p/how-i-passed-my-ccna-200-301-certification/><div class=article-image><img src=/p/how-i-passed-my-ccna-200-301-certification/ccna-logo.b2205938bb3a3096448cd481a3a5e76c_hu9cf0d999b1a2124dd580fda8f301c7f2_69707_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post How I passed my CCNA 200-301 Certification" data-hash="md5-siBZOLs6MJZEjNSBo6XnbA=="></div><div class=article-details><h2 class=article-title>How I passed my CCNA 200-301 Certification</h2></div></a></article><article class=has-image><a href=/p/how-mindmaps-help-you-study-for-your-cerification-ccna-example/><div class=article-image><img src=/p/how-mindmaps-help-you-study-for-your-cerification-ccna-example/xmind1.0abc7dfe3ac9bdd3e4c95cff5f0ebbcd_hu8a1a025d304985f580173e56de5febe3_64396_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post How Mindmaps help you study for your cerification (CCNA example)" data-hash="md5-Crx9/jrJvdPkyVz/Xw67zQ=="></div><div class=article-details><h2 class=article-title>How Mindmaps help you study for your cerification (CCNA example)</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2023 Christopher Vierheller</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.12.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#requirements>Requirements</a></li><li><a href=#scenario--goals>Scenario / Goals</a></li><li><a href=#setup-ubuntu-server-and-install-ansible>Setup Ubuntu Server and install Ansible</a></li><li><a href=#uploading-ansible-files-and-playbooks>Uploading Ansible Files and Playbooks</a></li><li><a href=#executing-ansible-playbooks-for-the-automated-configuration>Executing Ansible playbooks for the automated configuration</a></li><li><a href=#checking-the-results--can-i-ping-pc2-from-pc-1->Checking the results / Can I ping PC2 from PC 1 ?</a></li><li><a href=#where-to-get-more-information-about-ansible>Where to get more information about Ansible</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>